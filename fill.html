<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1.0"/>
<title>ğŸŒ¸ Fill My Slambook</title>
<link href="https://fonts.googleapis.com/css2?family=Caveat:wght@400;600;700&family=Josefin+Sans:wght@300;400;600&family=Abril+Fatface&family=Dancing+Script:wght@500;700&family=Pacifico&family=Quicksand:wght@400;600&family=Satisfy&family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Raleway:wght@300;400;600&family=Nunito:wght@400;600;700&display=swap" rel="stylesheet"/>
<style>
/* â•â• THEME VARS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
:root{
  --bg:#FFF8F0;--paper:#FFFDF8;--spine:#FF8B6B;--spine2:#FFB3A0;
  --accent:#FF8B6B;--accent2:#FF6190;--ink:#2D1B4E;--soft-ink:#6B5B8A;
  --muted:rgba(107,91,138,.3);--shadow:rgba(45,27,78,.12);
  --c1:#FFD6E0;--c2:#E8D5F5;--c3:#C8F0E0;
  --line:rgba(180,160,200,.14);
  --font-body:'Josefin Sans',sans-serif;--font-hand:'Caveat',cursive;
  --input-bg:rgba(255,255,255,.7);--input-border:rgba(180,160,200,.28);
}
.theme-midnight{--bg:#0F0C1A;--paper:#1A1430;--spine:#A78BFA;--spine2:#7C3AED;--accent:#A78BFA;--accent2:#7C3AED;--ink:#EDE9FF;--soft-ink:#A89CC8;--muted:rgba(168,156,200,.3);--shadow:rgba(0,0,0,.5);--c1:#2D1F55;--c2:#1E1640;--c3:#1A2845;--line:rgba(100,80,160,.18);--input-bg:rgba(255,255,255,.05);--input-border:rgba(100,80,160,.3);}
.theme-ocean{--bg:#EAF6FF;--paper:#F5FBFF;--spine:#0284C7;--spine2:#0EA5E9;--accent:#0284C7;--accent2:#0EA5E9;--ink:#0C2D48;--soft-ink:#2E6B8A;--muted:rgba(46,107,138,.3);--shadow:rgba(12,45,72,.12);--c1:#BAE6FD;--c2:#A5F3FC;--c3:#B2F5EA;--line:rgba(100,180,220,.14);--input-bg:rgba(255,255,255,.7);--input-border:rgba(100,180,220,.3);}
.theme-forest{--bg:#F0F7F0;--paper:#F8FCF8;--spine:#2D7A2D;--spine2:#48A848;--accent:#2D7A2D;--accent2:#48A848;--ink:#1A3A1A;--soft-ink:#4A7A4A;--muted:rgba(74,122,74,.3);--shadow:rgba(26,58,26,.12);--c1:#D1FAE5;--c2:#BBF7D0;--c3:#A7F3D0;--line:rgba(100,160,100,.14);--input-bg:rgba(255,255,255,.7);--input-border:rgba(100,160,100,.3);}
.theme-sunset{--bg:#FFF5EE;--paper:#FFFAF5;--spine:#E85D04;--spine2:#F48C06;--accent:#E85D04;--accent2:#F48C06;--ink:#3D1A00;--soft-ink:#8B4500;--muted:rgba(139,69,0,.3);--shadow:rgba(61,26,0,.12);--c1:#FED7AA;--c2:#FDE68A;--c3:#FCA5A5;--line:rgba(200,100,40,.12);--input-bg:rgba(255,255,255,.7);--input-border:rgba(200,100,40,.25);}
.theme-candy{--bg:#FFF0F8;--paper:#FFF8FC;--spine:#E91E8C;--spine2:#FF4DB8;--accent:#E91E8C;--accent2:#FF4DB8;--ink:#3D0030;--soft-ink:#8B1060;--muted:rgba(139,16,96,.3);--shadow:rgba(61,0,48,.12);--c1:#FBCFE8;--c2:#F5D0FE;--c3:#DDD6FE;--line:rgba(200,80,160,.12);--input-bg:rgba(255,255,255,.7);--input-border:rgba(200,80,160,.28);}
.theme-darkrose{--bg:#1A0A0F;--paper:#250D16;--spine:#F43F6A;--spine2:#E11D48;--accent:#F43F6A;--accent2:#E11D48;--ink:#FFE0EA;--soft-ink:#C9889A;--muted:rgba(201,136,154,.3);--shadow:rgba(0,0,0,.5);--c1:#4C1027;--c2:#3D0A1E;--c3:#2D1020;--line:rgba(180,40,80,.18);--input-bg:rgba(255,255,255,.04);--input-border:rgba(180,40,80,.3);}

*{margin:0;padding:0;box-sizing:border-box;}
body{background:var(--bg);font-family:var(--font-body);min-height:100vh;overflow-x:hidden;transition:background .4s,color .4s;}

.scene{position:fixed;inset:0;z-index:0;background:radial-gradient(ellipse 70% 60% at 10% 10%,rgba(255,214,224,.4),transparent),radial-gradient(ellipse 50% 40% at 90% 90%,rgba(232,213,245,.4),transparent),var(--bg);transition:background .4s;}
.scene::after{content:'';position:absolute;inset:0;background-image:repeating-linear-gradient(transparent,transparent 39px,var(--line) 39px,var(--line) 40px);}
.floaty-bg{position:fixed;pointer-events:none;z-index:1;font-size:1.8rem;animation:floatBg 15s ease-in-out infinite;opacity:.4;}
@keyframes floatBg{0%,100%{transform:translateY(0) rotate(-3deg);}50%{transform:translateY(-16px) rotate(6deg);}}

/* â•â• THEME PICKER STRIP â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.theme-strip{
  position:sticky;top:0;z-index:200;
  background:var(--paper);
  box-shadow:0 2px 14px var(--shadow);
  padding:10px 16px;
  display:flex;align-items:center;gap:10px;
  transition:background .4s;
  overflow-x:auto;
}
.theme-strip::-webkit-scrollbar{height:3px;}
.theme-strip::-webkit-scrollbar-thumb{background:var(--c1);}
.ts-label{font-size:.65rem;letter-spacing:1.5px;text-transform:uppercase;color:var(--soft-ink);white-space:nowrap;flex-shrink:0;}
.ts-divider{width:1px;height:24px;background:var(--line);flex-shrink:0;}
.ts-swatches{display:flex;gap:6px;align-items:center;}
.ts-dot{
  width:26px;height:26px;border-radius:50%;cursor:pointer;
  border:2px solid transparent;transition:transform .15s,border-color .15s;
  flex-shrink:0;box-shadow:0 2px 6px rgba(0,0,0,.15);
}
.ts-dot:hover{transform:scale(1.12);}
.ts-dot.active{border-color:var(--accent);transform:scale(1.15);}
.ts-fonts{display:flex;gap:6px;align-items:center;}
.ts-font-btn{
  padding:4px 10px;border-radius:20px;
  background:var(--bg);border:1.5px solid var(--input-border);
  font-size:.85rem;color:var(--soft-ink);cursor:pointer;
  transition:all .15s;white-space:nowrap;flex-shrink:0;
}
.ts-font-btn:hover{border-color:var(--accent);}
.ts-font-btn.active{background:var(--accent);color:white;border-color:var(--accent);}

/* â•â• LOAD SCREEN â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#loadScreen{position:fixed;inset:0;z-index:300;display:flex;flex-direction:column;align-items:center;justify-content:center;background:var(--bg);transition:background .4s;}
.load-spinner{width:60px;height:60px;border:4px solid var(--c1);border-top-color:var(--accent);border-radius:50%;animation:spin .8s linear infinite;margin-bottom:16px;}
@keyframes spin{to{transform:rotate(360deg);}}
.load-txt{font-family:var(--font-hand);font-size:1.4rem;color:var(--ink);}

/* â•â• MAIN WRAP â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#mainWrap{display:none;position:relative;z-index:10;max-width:780px;margin:0 auto;padding:24px 16px 60px;}

.banner{background:var(--paper);border-radius:4px 18px 18px 4px;padding:22px 24px 22px 36px;margin-bottom:20px;box-shadow:-3px 0 0 var(--spine),6px 6px 28px var(--shadow);position:relative;transition:background .4s,box-shadow .4s;}
.banner::before{content:'';position:absolute;left:0;top:0;bottom:0;width:22px;background:linear-gradient(180deg,var(--spine2),var(--spine) 50%,var(--spine2));border-radius:4px 0 0 4px;}
.banner-name{font-family:var(--font-hand);font-size:2rem;color:var(--ink);margin-bottom:4px;}
.banner-name em{color:var(--accent);font-style:normal;}
.banner-sub{font-size:.78rem;color:var(--soft-ink);letter-spacing:.5px;}

/* Edit mode banner */
.edit-banner{background:linear-gradient(135deg,var(--c2),var(--c1));border-radius:12px;padding:12px 18px;margin-bottom:18px;display:none;align-items:center;gap:12px;}
.edit-banner.show{display:flex;}
.edit-banner span{font-family:var(--font-hand);font-size:1.1rem;color:var(--ink);}
.edit-banner-icon{font-size:1.5rem;}

.progress-wrap{margin-bottom:22px;background:var(--paper);border-radius:12px;padding:14px 18px;box-shadow:0 2px 12px var(--shadow);transition:background .4s;}
.prog-label{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;}
.prog-label span:first-child{font-size:.72rem;letter-spacing:1.5px;text-transform:uppercase;color:var(--soft-ink);}
#pct{font-family:var(--font-hand);font-size:1.1rem;color:var(--accent);}
.prog-track{height:8px;background:var(--c1);border-radius:4px;overflow:hidden;}
#progFill{height:100%;width:0;background:linear-gradient(90deg,var(--accent),var(--accent2));border-radius:4px;transition:width .4s ease;}

.s-card{background:var(--paper);border-radius:14px;padding:22px;margin-bottom:18px;box-shadow:4px 4px 18px var(--shadow);border-left:4px solid var(--c1);animation:cardIn .5s ease both;transition:background .4s,box-shadow .4s;}
@keyframes cardIn{from{opacity:0;transform:translateY(16px);}to{opacity:1;transform:translateY(0);}}
.s-title{font-family:var(--font-hand);font-size:1.45rem;color:var(--ink);margin-bottom:18px;padding-bottom:8px;border-bottom:1.5px dashed var(--line);}
.card-basics{border-left-color:var(--accent);}
.card-favs{border-left-color:var(--c2);}
.card-dreams{border-left-color:var(--c3);}
.card-me{border-left-color:var(--c1);}
.card-us{border-left-color:var(--c2);}
.card-music{border-left-color:var(--c3);}
.card-rapid{border-left-color:var(--accent);}
.card-last{border-left-color:var(--c1);}

.f-wrap{margin-bottom:14px;}
.f-wrap label{display:block;font-size:.68rem;letter-spacing:1.5px;text-transform:uppercase;color:var(--soft-ink);margin-bottom:5px;}
.f-input{width:100%;padding:10px 14px;background:var(--input-bg);border:1.5px solid var(--input-border);border-radius:9px;font-family:var(--font-hand);font-size:1.08rem;color:var(--ink);outline:none;transition:border-color .2s,box-shadow .2s,background .4s;resize:none;}
.f-input:focus{border-color:var(--accent);box-shadow:0 0 0 3px rgba(255,139,107,.12);}
.f-input::placeholder{color:var(--muted);font-style:italic;}
textarea.f-input{height:80px;}

.rf-group{margin-bottom:14px;}
.rf-q{display:block;font-size:.72rem;letter-spacing:1.2px;text-transform:uppercase;color:var(--soft-ink);margin-bottom:8px;}
.rf-options{display:flex;gap:10px;flex-wrap:wrap;}
.rf-btn{padding:9px 18px;border-radius:20px;border:1.5px solid var(--input-border);background:var(--input-bg);font-family:var(--font-hand);font-size:1rem;color:var(--soft-ink);cursor:pointer;transition:all .18s;}
.rf-btn.selected{background:linear-gradient(135deg,var(--accent),var(--accent2));color:white;border-color:transparent;transform:scale(1.05);}

.remember-wrap{margin-top:16px;}
.remember-wrap p{font-family:var(--font-hand);font-size:1.15rem;color:var(--ink);margin-bottom:10px;}
.remember-options{display:flex;gap:12px;flex-wrap:wrap;}
.remember-btn{padding:10px 22px;border-radius:20px;border:1.5px solid var(--input-border);background:var(--input-bg);font-family:var(--font-hand);font-size:1.05rem;color:var(--soft-ink);cursor:pointer;transition:all .18s;}
.remember-btn.yes.selected{background:linear-gradient(135deg,var(--accent),var(--accent2));color:white;border-color:transparent;}
.remember-btn.no{opacity:.5;text-decoration:line-through;}

.submit-area{text-align:center;margin-top:24px;}
.submit-btn{padding:14px 48px;background:linear-gradient(135deg,var(--accent),var(--accent2));border:none;border-radius:50px;font-family:var(--font-hand);font-size:1.4rem;color:white;cursor:pointer;box-shadow:0 6px 24px rgba(0,0,0,.2);transition:transform .15s,box-shadow .15s;}
.submit-btn:hover{transform:translateY(-3px);box-shadow:0 10px 32px rgba(0,0,0,.25);}
.submit-btn:active{transform:translateY(1px);}
.submit-btn:disabled{opacity:.55;cursor:not-allowed;transform:none;}

/* â•â• SUCCESS SCREEN â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#successScreen{display:none;flex-direction:column;align-items:center;justify-content:center;min-height:60vh;text-align:center;padding:40px 20px;}
.success-book{background:var(--paper);border-radius:4px 20px 20px 4px;padding:40px 36px;max-width:420px;box-shadow:-4px 0 0 var(--accent),8px 8px 40px var(--shadow);animation:successPop .6s cubic-bezier(.34,1.56,.64,1);transition:background .4s;}
@keyframes successPop{from{transform:scale(.7);opacity:0;}to{transform:scale(1);opacity:1;}}
.success-emoji{font-size:3.5rem;display:block;margin-bottom:12px;animation:bounce 1s ease infinite;}
@keyframes bounce{0%,100%{transform:translateY(0);}50%{transform:translateY(-12px);}}
.success-title{font-family:var(--font-hand);font-size:2.2rem;color:var(--ink);margin-bottom:8px;}
.success-sub{font-size:.85rem;color:var(--soft-ink);line-height:1.6;margin-bottom:20px;}
.edit-again-btn{padding:11px 32px;background:linear-gradient(135deg,var(--accent),var(--accent2));border:none;border-radius:30px;font-family:var(--font-hand);font-size:1.15rem;color:white;cursor:pointer;box-shadow:0 4px 16px rgba(0,0,0,.2);transition:transform .15s;}
.edit-again-btn:hover{transform:scale(1.05);}

#toast{position:fixed;bottom:28px;left:50%;transform:translateX(-50%) translateY(16px);background:var(--ink);color:var(--bg);font-family:var(--font-hand);font-size:1.1rem;padding:12px 28px;border-radius:50px;z-index:9999;opacity:0;transition:all .3s;pointer-events:none;}
#toast.show{opacity:1;transform:translateX(-50%) translateY(0);}
</style>
</head>
<body>

<div class="scene"></div>
<span class="floaty-bg" style="top:8%;left:5%;animation-delay:0s;">ğŸŒ¸</span>
<span class="floaty-bg" style="bottom:15%;right:6%;animation-delay:-6s;">âœ¨</span>
<span class="floaty-bg" style="top:45%;right:3%;animation-delay:-11s;">ğŸ’Œ</span>

<!-- THEME STRIP -->
<div class="theme-strip" id="themeStrip">
  <span class="ts-label">ğŸ¨ Theme</span>
  <div class="ts-swatches" id="tsSwatches"></div>
  <div class="ts-divider"></div>
  <span class="ts-label">âœï¸ Font</span>
  <div class="ts-fonts" id="tsFonts"></div>
</div>

<!-- LOAD -->
<div id="loadScreen">
  <div class="load-spinner"></div>
  <div class="load-txt" id="loadTxt">Loading slambookâ€¦ ğŸŒ¸</div>
</div>

<!-- MAIN -->
<div id="mainWrap">
  <div class="banner">
    <div class="banner-name" id="ownerName"><em>Someone's</em> Slambook</div>
    <div class="banner-sub">fill this out &amp; leave your mark forever ğŸ’Œ</div>
  </div>

  <!-- Edit mode notice -->
  <div class="edit-banner" id="editBanner">
    <span class="edit-banner-icon">âœï¸</span>
    <span>You've filled this before! Your previous answers are loaded. Edit anything and resubmit~</span>
  </div>

  <div class="progress-wrap">
    <div class="prog-label"><span>Your Progress</span><span id="pct">0%</span></div>
    <div class="prog-track"><div id="progFill"></div></div>
  </div>

  <form id="slamForm">
    <div class="s-card card-basics" style="animation-delay:0s">
      <div class="s-title">ğŸ’Œ Basic Details</div>
      <div class="f-wrap"><label>Full Name *</label><input class="f-input trackable" type="text" name="full_name" placeholder="your full name" maxlength="100" required/></div>
      <div class="f-wrap"><label>Nickname</label><input class="f-input trackable" type="text" name="nickname" placeholder="what friends call you" maxlength="50"/></div>
      <div class="f-wrap"><label>Date of Birth</label><input class="f-input trackable" type="text" name="dob" placeholder="dd/mm/yyyy" maxlength="20"/></div>
      <div class="f-wrap"><label>Zodiac Sign</label><input class="f-input trackable" type="text" name="zodiac" placeholder="â™ˆ Aries? â™‹ Cancer?" maxlength="30"/></div>
      <div class="f-wrap"><label>Contact (optional)</label><input class="f-input trackable" type="text" name="contact" placeholder="Instagram, phone, etc." maxlength="100"/></div>
    </div>
    <div class="s-card card-favs" style="animation-delay:.05s">
      <div class="s-title">â­ Favorites</div>
      <div class="f-wrap"><label>Favorite Color</label><input class="f-input trackable" type="text" name="fav_color" placeholder="ğŸ¨" maxlength="50"/></div>
      <div class="f-wrap"><label>Favorite Food</label><input class="f-input trackable" type="text" name="fav_food" placeholder="ğŸ•ğŸœğŸ°" maxlength="80"/></div>
      <div class="f-wrap"><label>Favorite Movie / Series</label><input class="f-input trackable" type="text" name="fav_movie" placeholder="ğŸ¬" maxlength="100"/></div>
      <div class="f-wrap"><label>Favorite Singer / Band</label><input class="f-input trackable" type="text" name="fav_singer" placeholder="ğŸ¤" maxlength="100"/></div>
      <div class="f-wrap"><label>Favorite Actor / Actress</label><input class="f-input trackable" type="text" name="fav_actor" placeholder="â­" maxlength="100"/></div>
      <div class="f-wrap"><label>Favorite Place</label><input class="f-input trackable" type="text" name="fav_place" placeholder="ğŸŒ" maxlength="100"/></div>
      <div class="f-wrap"><label>Favorite Subject</label><input class="f-input trackable" type="text" name="fav_subject" placeholder="ğŸ“š" maxlength="80"/></div>
      <div class="f-wrap"><label>Favorite Hobby</label><input class="f-input trackable" type="text" name="fav_hobby" placeholder="ğŸ®ğŸ¨ğŸ“¸" maxlength="100"/></div>
      <div class="f-wrap"><label>Favorite Season</label><input class="f-input trackable" type="text" name="fav_season" placeholder="ğŸŒ¸â˜€ï¸ğŸ‚â„ï¸" maxlength="30"/></div>
      <div class="f-wrap"><label>Favorite Quote</label><textarea class="f-input trackable" name="fav_quote" placeholder="words you live byâ€¦"></textarea></div>
    </div>
    <div class="s-card card-dreams" style="animation-delay:.1s">
      <div class="s-title">ğŸ¯ Dreams & Goals</div>
      <div class="f-wrap"><label>Biggest Goal in Life</label><textarea class="f-input trackable" name="goal" placeholder="dream big âœ¨"></textarea></div>
      <div class="f-wrap"><label>Dream Job</label><input class="f-input trackable" type="text" name="dream_job" placeholder="what you want to be" maxlength="100"/></div>
      <div class="f-wrap"><label>Where do you see yourself in 10 years?</label><textarea class="f-input trackable" name="in_10_years" placeholder="paint the pictureâ€¦"></textarea></div>
      <div class="f-wrap"><label>One Thing You Want to Achieve</label><input class="f-input trackable" type="text" name="want_to_achieve" placeholder="before you die ğŸŒŸ" maxlength="200"/></div>
    </div>
    <div class="s-card card-me" style="animation-delay:.15s">
      <div class="s-title">ğŸ’­ About Me</div>
      <div class="f-wrap"><label>3 Words That Describe You</label><input class="f-input trackable" type="text" name="three_words" placeholder="funny, chaotic, kindâ€¦" maxlength="100"/></div>
      <div class="f-wrap"><label>Biggest Fear</label><input class="f-input trackable" type="text" name="biggest_fear" placeholder="ğŸ•·ï¸ğŸ‘»ğŸŒŠ" maxlength="150"/></div>
      <div class="f-wrap"><label>Your Biggest Strength</label><input class="f-input trackable" type="text" name="strength" placeholder="what makes you amazing?" maxlength="150"/></div>
      <div class="f-wrap"><label>Hidden Talent</label><input class="f-input trackable" type="text" name="hidden_talent" placeholder="secret skill unlocked ğŸ”“" maxlength="150"/></div>
      <div class="f-wrap"><label>Most Embarrassing Moment</label><textarea class="f-input trackable" name="embarrassing_moment" placeholder="spill it ğŸ‘€"></textarea></div>
      <div class="f-wrap"><label>Biggest Crush ğŸ˜</label><input class="f-input trackable" type="text" name="crush" placeholder="name them or keep it mysterious" maxlength="100"/></div>
    </div>
    <div class="s-card card-us" style="animation-delay:.2s">
      <div class="s-title">ğŸ‘€ About Us</div>
      <div class="f-wrap"><label>Your First Impression of Me</label><textarea class="f-input trackable" name="first_impression" placeholder="what did you think when we first met?"></textarea></div>
      <div class="f-wrap"><label>What Changed After Getting to Know Me?</label><textarea class="f-input trackable" name="what_changed" placeholder="how did your opinion change?"></textarea></div>
      <div class="f-wrap"><label>Our Favorite Memory Together</label><textarea class="f-input trackable" name="fav_memory" placeholder="that one timeâ€¦ ğŸŒŸ"></textarea></div>
      <div class="f-wrap"><label>What You Like Most About Me</label><textarea class="f-input trackable" name="like_most" placeholder="be honest ğŸ’–"></textarea></div>
      <div class="f-wrap"><label>What Annoys You About Me ğŸ˜…</label><input class="f-input trackable" type="text" name="annoys_me" placeholder="real talkâ€¦" maxlength="200"/></div>
      <div class="f-wrap"><label>A Secret Between Just Us</label><textarea class="f-input trackable" name="secret_between_us" placeholder="shhh ğŸ¤«"></textarea></div>
      <div class="f-wrap"><label>If Our Friendship Was a Movie Title</label><input class="f-input trackable" type="text" name="movie_title" placeholder="ğŸ¬" maxlength="150"/></div>
    </div>
    <div class="s-card card-music" style="animation-delay:.25s">
      <div class="s-title">ğŸµ Just For You</div>
      <div class="f-wrap"><label>A Song I'd Dedicate to You</label><input class="f-input trackable" type="text" name="dedicate_song" placeholder="ğŸ¶ song name + artist" maxlength="150"/></div>
      <div class="f-wrap"><label>A Line From That Song</label><textarea class="f-input trackable" name="song_line" placeholder="the lyric that reminds me of youâ€¦"></textarea></div>
      <div class="f-wrap"><label>If Our Friendship Had a Theme Song</label><input class="f-input trackable" type="text" name="theme_song" placeholder="ğŸµ" maxlength="150"/></div>
    </div>
    <div class="s-card card-rapid" style="animation-delay:.3s">
      <div class="s-title">ğŸ”¥ Rapid Fire</div>
      <div id="rfContainer"></div>
    </div>
    <div class="s-card card-last" style="animation-delay:.35s">
      <div class="s-title">ğŸ’– One Last Thing</div>
      <div class="f-wrap"><label>A Message For Me</label><textarea class="f-input trackable" name="message" placeholder="pour your heart out ğŸ’Œ" style="height:120px;"></textarea></div>
      <div class="remember-wrap">
        <p>Will you remember me? ğŸ¥º</p>
        <div class="remember-options">
          <button type="button" class="remember-btn yes" id="remYes" onclick="pickRemember('Yes! Always ğŸ’–')">Yes! Always ğŸ’–</button>
          <button type="button" class="remember-btn no" id="remNo" onclick="pickRemember('No option not allowed ğŸ˜Œ')">No â€” wait, nope!</button>
        </div>
        <input type="hidden" name="remember_me" id="remVal" value="Yes! Always ğŸ’–"/>
      </div>
    </div>
    <div class="submit-area">
      <button type="submit" class="submit-btn" id="submitBtn">ğŸ’Œ Slam It &amp; Send!</button>
    </div>
  </form>

  <!-- Success -->
  <div id="successScreen">
    <div class="success-book">
      <span class="success-emoji">ğŸŒ¸</span>
      <div class="success-title">Slammed! ğŸ’Œ</div>
      <div class="success-sub" id="successMsg">Your words have been delivered!</div>
      <button class="edit-again-btn" onclick="showEditMode()">âœï¸ Edit My Answers</button>
    </div>
  </div>
</div>

<div id="toast"></div>

<script>
/* â•â• SUPABASE â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const SUPA_URL='https://axysorsklatueeefvnyp.supabase.co';
const SUPA_KEY='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImF4eXNvcnNrbGF0dWVlZWZ2bnlwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzIzMTk1MzAsImV4cCI6MjA4Nzg5NTUzMH0.FPKfSFiYKezU292ZA3__GFngsV14PqIM2HU9sf69L1Y';
const H={'Content-Type':'application/json','apikey':SUPA_KEY,'Authorization':'Bearer '+SUPA_KEY};
async function sbFetch(path,opts={}){
  const r=await fetch(SUPA_URL+path,{...opts,headers:{...H,...(opts.headers||{})}});
  const d=await r.json().catch(()=>({}));
  return{ok:r.ok,status:r.status,data:d};
}

/* â•â• THEME + FONT â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const THEMES=[
  {id:'',        emoji:'ğŸŒ¸',dot:'linear-gradient(135deg,#FFD6E0,#E8D5F5)',name:'Blossom'},
  {id:'midnight',emoji:'ğŸŒ™',dot:'linear-gradient(135deg,#2D1B4E,#4A3580)',name:'Midnight'},
  {id:'ocean',   emoji:'ğŸŒŠ',dot:'linear-gradient(135deg,#BAE6FD,#0284C7)',name:'Ocean'},
  {id:'forest',  emoji:'ğŸŒ¿',dot:'linear-gradient(135deg,#D1FAE5,#2D7A2D)',name:'Forest'},
  {id:'sunset',  emoji:'ğŸŒ…',dot:'linear-gradient(135deg,#FED7AA,#E85D04)',name:'Sunset'},
  {id:'candy',   emoji:'ğŸ­',dot:'linear-gradient(135deg,#FBCFE8,#E91E8C)',name:'Candy'},
  {id:'darkrose',emoji:'ğŸ¥€',dot:'linear-gradient(135deg,#4C1027,#F43F6A)',name:'Dark Rose'},
];
const FONTS=[
  {id:'caveat',   name:'Caveat',   hand:"'Caveat',cursive",        body:"'Josefin Sans',sans-serif"},
  {id:'dancing',  name:'Dancing',  hand:"'Dancing Script',cursive",body:"'Quicksand',sans-serif"},
  {id:'pacifico', name:'Pacifico', hand:"'Pacifico',cursive",      body:"'Nunito',sans-serif"},
  {id:'satisfy',  name:'Satisfy',  hand:"'Satisfy',cursive",       body:"'Raleway',sans-serif"},
  {id:'playfair', name:'Playfair', hand:"'Playfair Display',serif",body:"'Josefin Sans',sans-serif"},
];

/* Load saved prefs â€” shared with index.html via localStorage */
let activeTheme=localStorage.getItem('sb_theme')||'';
let activeFont =localStorage.getItem('sb_font') ||'caveat';

function applyTheme(id,save=true){
  activeTheme=id;
  document.body.className=document.body.className.replace(/\btheme-\S+/g,'').trim();
  if(id) document.body.classList.add('theme-'+id);
  if(save) localStorage.setItem('sb_theme',id);
  document.querySelectorAll('.ts-dot').forEach(d=>d.classList.toggle('active',d.dataset.theme===id));
}
function applyFont(id,save=true){
  activeFont=id;
  const f=FONTS.find(x=>x.id===id)||FONTS[0];
  document.documentElement.style.setProperty('--font-body',f.body);
  document.documentElement.style.setProperty('--font-hand',f.hand);
  if(save) localStorage.setItem('sb_font',id);
  document.querySelectorAll('.ts-font-btn').forEach(b=>b.classList.toggle('active',b.dataset.font===id));
}
function buildStrip(){
  const sw=document.getElementById('tsSwatches'); sw.innerHTML='';
  THEMES.forEach(t=>{
    const d=document.createElement('div');
    d.className='ts-dot'+(t.id===activeTheme?' active':'');
    d.dataset.theme=t.id;
    d.style.background=t.dot;
    d.title=t.name;
    d.addEventListener('click',()=>applyTheme(t.id));
    sw.appendChild(d);
  });
  const fn=document.getElementById('tsFonts'); fn.innerHTML='';
  FONTS.forEach(f=>{
    const b=document.createElement('button');
    b.className='ts-font-btn'+(f.id===activeFont?' active':'');
    b.dataset.font=f.id;
    b.textContent=f.name;
    b.style.fontFamily=f.hand;
    b.addEventListener('click',()=>applyFont(f.id));
    fn.appendChild(b);
  });
}
applyTheme(activeTheme,false);
applyFont(activeFont,false);
buildStrip();

/* â•â• TOAST â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function toast(msg){
  const t=document.getElementById('toast');
  t.textContent=msg;t.classList.add('show');
  setTimeout(()=>t.classList.remove('show'),2600);
}

/* â•â• RAPID FIRE â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const rfData=[
  {name:'coffee_tea',  q:'â˜• Coffee or ğŸµ Tea?',    a:['Coffee â˜•','Tea ğŸµ']},
  {name:'night_day',   q:'ğŸŒ™ Night or â˜€ï¸ Day?',     a:['Night ğŸŒ™','Day â˜€ï¸']},
  {name:'love_money',  q:'ğŸ’• Love or ğŸ’° Money?',    a:['Love ğŸ’•','Money ğŸ’°']},
  {name:'call_text',   q:'ğŸ“ Call or ğŸ’¬ Text?',     a:['Call ğŸ“','Text ğŸ’¬']},
  {name:'mountains_beach',q:'â›°ï¸ Mountains or ğŸ–ï¸ Beach?',a:['Mountains â›°ï¸','Beach ğŸ–ï¸']},
  {name:'intro_extro', q:'ğŸ™ˆ Introvert or ğŸ¦‹ Extrovert?',a:['Introvert ğŸ™ˆ','Extrovert ğŸ¦‹']},
];
const rfVals={};
const rfContainer=document.getElementById('rfContainer');
rfData.forEach(item=>{
  rfVals[item.name]='';
  const div=document.createElement('div');
  div.className='rf-group';
  div.innerHTML=`<span class="rf-q">${item.q}</span><div class="rf-options">
    <button type="button" class="rf-btn trackable" data-name="${item.name}" data-val="${item.a[0]}">${item.a[0]}</button>
    <button type="button" class="rf-btn trackable" data-name="${item.name}" data-val="${item.a[1]}">${item.a[1]}</button>
  </div>`;
  rfContainer.appendChild(div);
});
rfContainer.addEventListener('click',e=>{
  const btn=e.target.closest('.rf-btn');
  if(!btn)return;
  rfVals[btn.dataset.name]=btn.dataset.val;
  rfContainer.querySelectorAll(`.rf-btn[data-name="${btn.dataset.name}"]`).forEach(b=>b.classList.toggle('selected',b===btn));
  updateProgress();
});

function pickRemember(val){
  document.getElementById('remVal').value=val;
  document.getElementById('remYes').classList.toggle('selected',val.startsWith('Yes'));
  document.getElementById('remNo').classList.toggle('selected',val.startsWith('No'));
}
pickRemember('Yes! Always ğŸ’–');

function updateProgress(){
  const inputs=[...document.querySelectorAll('input.trackable,textarea.trackable')];
  const filled=inputs.filter(el=>el.value.trim()).length;
  const rfFilled=Object.values(rfVals).filter(v=>v).length;
  const total=inputs.length+rfData.length;
  const pct=total?Math.min(100,Math.round(((filled+rfFilled)/total)*100)):0;
  document.getElementById('pct').textContent=pct+'%';
  document.getElementById('progFill').style.width=pct+'%';
}
document.querySelectorAll('.f-input.trackable').forEach(el=>el.addEventListener('input',updateProgress));

/* â•â• EDIT MODE HELPERS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
/* Store entry_id per slambook token so same person can edit later */
function getSavedEntryId(token){ return localStorage.getItem('slam_entry_'+token); }
function setSavedEntryId(token,id){ localStorage.setItem('slam_entry_'+token,id); }

function prefillForm(data){
  /* Fill all text/textarea inputs */
  document.querySelectorAll('.f-input[name]').forEach(el=>{
    if(data[el.name]!==undefined && data[el.name]!==null)
      el.value=data[el.name];
  });
  /* Rapid fire */
  rfData.forEach(item=>{
    if(data[item.name]){
      rfVals[item.name]=data[item.name];
      rfContainer.querySelectorAll(`.rf-btn[data-name="${item.name}"]`).forEach(b=>{
        b.classList.toggle('selected',b.dataset.val===data[item.name]);
      });
    }
  });
  /* Remember me */
  if(data.remember_me) pickRemember(data.remember_me);
  updateProgress();
}

function showEditMode(){
  document.getElementById('successScreen').style.display='none';
  document.getElementById('slamForm').style.display='block';
  document.querySelector('.banner').style.display='block';
  document.querySelector('.progress-wrap').style.display='block';
  document.getElementById('editBanner').classList.add('show');
  document.getElementById('submitBtn').textContent='âœï¸ Update My Slam!';
  window.scrollTo({top:0,behavior:'smooth'});
}

/* â•â• INIT â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const token=new URLSearchParams(location.search).get('s')||'';
let ownerProfile=null;
let existingEntryId=null;

async function init(){
  if(!token){document.getElementById('loadTxt').textContent='âŒ Invalid link.';return;}

  /* Load owner */
  const r=await sbFetch(`/rest/v1/profiles?slambook_token=eq.${encodeURIComponent(token)}&select=id,username`);
  if(!r.ok||!r.data.length){document.getElementById('loadTxt').textContent='âŒ Slambook not found!';return;}
  ownerProfile=r.data[0];
  document.getElementById('ownerName').innerHTML=`<em>${ownerProfile.username}'s</em> Slambook`;
  document.title='ğŸŒ¸ '+ownerProfile.username+"'s Slambook";

  /* Check if this person already filled (stored entry_id in localStorage) */
  const savedId=getSavedEntryId(token);
  if(savedId){
    const er=await sbFetch(`/rest/v1/responses?entry_id=eq.${savedId}&select=*`);
    if(er.ok&&er.data.length){
      existingEntryId=savedId;
      prefillForm(er.data[0]);
      document.getElementById('editBanner').classList.add('show');
      document.getElementById('submitBtn').textContent='âœï¸ Update My Slam!';
    }
  }

  document.getElementById('loadScreen').style.display='none';
  document.getElementById('mainWrap').style.display='block';
}
init();

/* â•â• SUBMIT / UPDATE â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
document.getElementById('slamForm').addEventListener('submit',async e=>{
  e.preventDefault();
  const btn=document.getElementById('submitBtn');
  btn.disabled=true;
  btn.textContent=existingEntryId?'Updatingâ€¦ âœï¸':'Sendingâ€¦ ğŸ’Œ';

  if(!ownerProfile){alert('Invalid slambook link!');btn.disabled=false;return;}

  const fd=new FormData(e.target);
  const payload={owner_id:ownerProfile.id};
  fd.forEach((v,k)=>payload[k]=String(v).trim().slice(0,500));
  Object.assign(payload,rfVals);
  if(!payload.full_name){btn.disabled=false;btn.textContent=existingEntryId?'âœï¸ Update My Slam!':'ğŸ’Œ Slam It & Send!';alert('Please enter your full name!');return;}

  let ok=false;
  let newEntryId=existingEntryId;

  if(existingEntryId){
    /* UPDATE existing row */
    const upd=await sbFetch(`/rest/v1/responses?entry_id=eq.${existingEntryId}`,{
      method:'PATCH',
      headers:{'Prefer':'return=minimal'},
      body:JSON.stringify(payload)
    });
    ok=upd.ok;
  } else {
    /* INSERT new row */
    const ins=await sbFetch('/rest/v1/responses',{
      method:'POST',
      headers:{'Prefer':'return=representation'},
      body:JSON.stringify(payload)
    });
    ok=ins.ok;
    if(ok&&ins.data[0]){
      newEntryId=ins.data[0].entry_id;
      existingEntryId=newEntryId;
      setSavedEntryId(token,newEntryId);
    }
  }

  if(!ok){
    btn.disabled=false;
    btn.textContent=existingEntryId?'âœï¸ Update My Slam!':'ğŸ’Œ Slam It & Send!';
    alert('Something went wrong. Please try again!');return;
  }

  /* Show success */
  document.getElementById('slamForm').style.display='none';
  document.querySelector('.banner').style.display='none';
  document.querySelector('.progress-wrap').style.display='none';
  document.getElementById('editBanner').classList.remove('show');
  const ss=document.getElementById('successScreen');
  ss.style.display='flex';
  document.getElementById('successMsg').textContent=existingEntryId&&newEntryId===existingEntryId
    ?`Updated! ${ownerProfile.username} will see your new answers ğŸ’Œ`
    :`Delivered to ${ownerProfile.username}! ğŸ’Œ`;
  btn.disabled=false;
});
</script>
</body>
</html>